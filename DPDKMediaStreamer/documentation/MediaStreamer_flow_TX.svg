<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1286px" preserveAspectRatio="none" style="width:606px;height:1286px;" version="1.1" viewBox="0 0 606 1286" width="606px" zoomAndPan="magnify"><defs><filter height="300%" id="f1o4y07xsqabph" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1o4y07xsqabph)" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="388" x="13" y="222.3672"/><rect fill="#FFFFFF" filter="url(#f1o4y07xsqabph)" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="388" x="13" y="420.4766"/><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="391.5" y="506.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="398.5" y="528.0645">ProducerEssence</text><rect fill="#FFFFFF" filter="url(#f1o4y07xsqabph)" height="92.0547" style="stroke: #000000; stroke-width: 2.0;" width="346.5" x="238" y="785.6016"/><rect fill="#FFFFFF" filter="url(#f1o4y07xsqabph)" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="388" x="13" y="966.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="39.6094" y2="1244.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="293" x2="293" y1="39.6094" y2="1244.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="456.5" x2="456.5" y1="539.8359" y2="1244.5234"/><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="24.5332">Application</text><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="1243.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="1265.0566">Application</text><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="248" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="255" y="24.5332">St21Library</text><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="248" y="1243.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="255" y="1265.0566">St21Library</text><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="391.5" y="1243.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="398.5" y="1265.0566">ProducerEssence</text><rect fill="#EEEEEE" filter="url(#f1o4y07xsqabph)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="591.5" x="3" y="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="594.5" y1="70.7852" y2="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="594.5" y1="73.7852" y2="73.7852"/><rect fill="#EEEEEE" filter="url(#f1o4y07xsqabph)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="97" x="250.25" y="59.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="256.25" y="77.1045">Initialization</text><polygon fill="#A80036" points="281.5,111.9609,291.5,115.9609,281.5,119.9609,285.5,115.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="115.9609" y2="115.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="73.5" y="111.4561">StCreateDevice() for TX direction</text><polygon fill="#A80036" points="77.5,142.3125,67.5,146.3125,77.5,150.3125,73.5,146.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="146.3125" y2="146.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="141.8076">ST_OK</text><polygon fill="#A80036" points="281.5,172.6641,291.5,176.6641,281.5,180.6641,285.5,176.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="176.6641" y2="176.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="73.5" y="172.1592">StCreateDevice() for RX direction</text><polygon fill="#A80036" points="77.5,203.0156,67.5,207.0156,77.5,211.0156,73.5,207.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="207.0156" y2="207.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="202.5107">ST_OK</text><path d="M13,222.3672 L86,222.3672 L86,230.3672 L76,240.3672 L13,240.3672 L13,222.3672 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="388" x="13" y="222.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="236.8623">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="101" y="235.7861">[for all chosen essences (Audio, Video and Ancillary)]</text><polygon fill="#A80036" points="281.5,258.7188,291.5,262.7188,281.5,266.7188,285.5,262.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="262.7188" y2="262.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="73.5" y="258.2139">StCreateSession()</text><polygon fill="#A80036" points="77.5,289.0703,67.5,293.0703,77.5,297.0703,73.5,293.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="293.0703" y2="293.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="288.5654">ST_OK</text><polygon fill="#A80036" points="281.5,319.4219,291.5,323.4219,281.5,327.4219,285.5,323.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="323.4219" y2="323.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="73.5" y="318.917">BindIpAddress()</text><polygon fill="#A80036" points="77.5,349.7734,67.5,353.7734,77.5,357.7734,73.5,353.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="353.7734" y2="353.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="349.2686">ST_OK</text><rect fill="#EEEEEE" filter="url(#f1o4y07xsqabph)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="591.5" x="3" y="390.3008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="594.5" y1="390.3008" y2="390.3008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="594.5" y1="393.3008" y2="393.3008"/><rect fill="#EEEEEE" filter="url(#f1o4y07xsqabph)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="208" x="194.75" y="379.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="200.75" y="396.6201">Application setup as Producer</text><path d="M13,420.4766 L86,420.4766 L86,428.4766 L76,438.4766 L13,438.4766 L13,420.4766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="388" x="13" y="420.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="434.9717">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="101" y="433.8955">[for all chosen essences (Audio, Video and Ancillary)]</text><polygon fill="#A80036" points="281.5,456.8281,291.5,460.8281,281.5,464.8281,285.5,460.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="460.8281" y2="460.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="73.5" y="456.3232">StAllocFrame() for min 2 frames</text><polygon fill="#A80036" points="77.5,487.1797,67.5,491.1797,77.5,495.1797,73.5,491.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="491.1797" y2="491.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="83.5" y="486.6748">External buffer for essence content</text><polygon fill="#A80036" points="379.5,524.5313,389.5,528.5313,379.5,532.5313,383.5,528.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="385.5" y1="528.5313" y2="528.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="73.5" y="524.0264">create  (Video, Audio, Ancilary)</text><rect fill="#FEFECE" filter="url(#f1o4y07xsqabph)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="391.5" y="506.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="398.5" y="528.0645">ProducerEssence</text><polygon fill="#A80036" points="281.5,571.1406,291.5,575.1406,281.5,579.1406,285.5,575.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="575.1406" y2="575.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="73.5" y="570.6357">StRegisterProducer()</text><polygon fill="#A80036" points="77.5,601.4922,67.5,605.4922,77.5,609.4922,73.5,605.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="605.4922" y2="605.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="600.9873">ST_OK</text><polygon fill="#A80036" points="281.5,631.8438,291.5,635.8438,281.5,639.8438,285.5,635.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="635.8438" y2="635.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="73.5" y="631.3389">St21ProducerStartFrame(frameBuf)</text><polygon fill="#A80036" points="77.5,662.1953,67.5,666.1953,77.5,670.1953,73.5,666.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="666.1953" y2="666.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="661.6904">ST_OK</text><polygon fill="#A80036" points="281.5,692.5469,291.5,696.5469,281.5,700.5469,285.5,696.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="696.5469" y2="696.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="73.5" y="692.042">StStartDevice(dev)</text><polygon fill="#A80036" points="77.5,722.8984,67.5,726.8984,77.5,730.8984,73.5,726.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="726.8984" y2="726.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="83.5" y="722.3936">S_OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="108.5" y1="757.6016" y2="757.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108.5" x2="108.5" y1="757.6016" y2="770.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67.5" x2="108.5" y1="770.6016" y2="770.6016"/><polygon fill="#A80036" points="77.5,766.6016,67.5,770.6016,77.5,774.6016,73.5,770.6016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="73.5" y="752.7451">wait for all threads to converge</text><path d="M238,785.6016 L311,785.6016 L311,793.6016 L301,803.6016 L238,803.6016 L238,785.6016 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="92.0547" style="stroke: #000000; stroke-width: 2.0;" width="346.5" x="238" y="785.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="253" y="800.0967">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="326" y="799.0205">[till application exit]</text><polygon fill="#A80036" points="444.5,821.9531,454.5,825.9531,444.5,829.9531,448.5,825.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="293.5" x2="450.5" y1="825.9531" y2="825.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="300.5" y="821.4482">St21GetNextFrameBuf()</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="456.5" x2="498.5" y1="856.6563" y2="856.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="498.5" x2="498.5" y1="856.6563" y2="869.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="457.5" x2="498.5" y1="869.6563" y2="869.6563"/><polygon fill="#A80036" points="467.5,865.6563,457.5,869.6563,467.5,873.6563,463.5,869.6563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="463.5" y="851.7998">Copy data to buffer</text><polygon fill="#A80036" points="77.5,902.6563,67.5,906.6563,77.5,910.6563,73.5,906.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="455.5" y1="906.6563" y2="906.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="83.5" y="902.1514">: end of data</text><rect fill="#EEEEEE" filter="url(#f1o4y07xsqabph)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="591.5" x="3" y="936.1836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="594.5" y1="936.1836" y2="936.1836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="594.5" y1="939.1836" y2="939.1836"/><rect fill="#EEEEEE" filter="url(#f1o4y07xsqabph)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="118" x="239.75" y="925.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="245.75" y="942.5029">Library cleanup</text><path d="M13,966.3594 L86,966.3594 L86,974.3594 L76,984.3594 L13,984.3594 L13,966.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="388" x="13" y="966.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="980.8545">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="101" y="979.7783">[for all chosen essences (Audio, Video and Ancillary)]</text><polygon fill="#A80036" points="281.5,1002.7109,291.5,1006.7109,281.5,1010.7109,285.5,1006.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="1006.7109" y2="1006.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="73.5" y="1002.2061">StProducerStop()</text><polygon fill="#A80036" points="77.5,1033.0625,67.5,1037.0625,77.5,1041.0625,73.5,1037.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="1037.0625" y2="1037.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1032.5576">ST_OK</text><polygon fill="#A80036" points="281.5,1063.4141,291.5,1067.4141,281.5,1071.4141,285.5,1067.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="1067.4141" y2="1067.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="73.5" y="1062.9092">StDestroySession()</text><polygon fill="#A80036" points="77.5,1093.7656,67.5,1097.7656,77.5,1101.7656,73.5,1097.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="1097.7656" y2="1097.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1093.2607">ST_OK</text><polygon fill="#A80036" points="281.5,1131.1172,291.5,1135.1172,281.5,1139.1172,285.5,1135.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="1135.1172" y2="1135.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="73.5" y="1130.6123">StDestroyDevice() for TX direction</text><polygon fill="#A80036" points="77.5,1161.4688,67.5,1165.4688,77.5,1169.4688,73.5,1165.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="1165.4688" y2="1165.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1160.9639">ST_OK</text><polygon fill="#A80036" points="281.5,1191.8203,291.5,1195.8203,281.5,1199.8203,285.5,1195.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="287.5" y1="1195.8203" y2="1195.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="73.5" y="1191.3154">StDestroyDevice() for RX direction</text><polygon fill="#A80036" points="77.5,1222.1719,67.5,1226.1719,77.5,1230.1719,73.5,1226.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="292.5" y1="1226.1719" y2="1226.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1221.667">ST_OK</text><!--
@startuml
participant Application
participant St21Library

== Initialization ==
Application -> St21Library:StCreateDevice() for TX direction
Application <- - St21Library:ST_OK
Application -> St21Library:StCreateDevice() for RX direction
Application <- - St21Library:ST_OK
loop for all chosen essences (Audio, Video and Ancillary)
Application -> St21Library: StCreateSession()
Application <- - St21Library:ST_OK
Application -> St21Library: BindIpAddress()
Application <- - St21Library:ST_OK
end

== Application setup as Producer ==
loop for all chosen essences (Audio, Video and Ancillary)
Application -> St21Library:StAllocFrame() for min 2 frames
Application <- - St21Library:External buffer for essence content
end
Application -> ProducerEssence ** : create  (Video, Audio, Ancilary)
Application -> St21Library: StRegisterProducer()
Application <- - St21Library:ST_OK
Application -> St21Library: St21ProducerStartFrame(frameBuf)
Application <- - St21Library:ST_OK
Application -> St21Library:StStartDevice(dev)
Application <- - St21Library:S_OK
Application -> Application: wait for all threads to converge
loop till application exit
    ProducerEssence <- St21Library: St21GetNextFrameBuf()
    ProducerEssence - -> ProducerEssence: Copy data to buffer
end
ProducerEssence -> Application:: end of data
== Library cleanup ==
loop for all chosen essences (Audio, Video and Ancillary)
Application -> St21Library: StProducerStop()
Application <- - St21Library:ST_OK
Application -> St21Library: StDestroySession()
Application <- - St21Library:ST_OK
end
Application -> St21Library:StDestroyDevice() for TX direction
Application <- - St21Library:ST_OK
Application -> St21Library:StDestroyDevice() for RX direction
Application <- - St21Library:ST_OK

@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-release-1483-b39
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>