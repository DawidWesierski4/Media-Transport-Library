<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1681px" preserveAspectRatio="none" style="width:863px;height:1681px;" version="1.1" viewBox="0 0 863 1681" width="863px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g7huewxqxmm2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1g7huewxqxmm2)" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="222.3672"/><rect fill="#FFFFFF" filter="url(#f1g7huewxqxmm2)" height="200.4609" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="420.4766"/><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="471.5" y="627.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="478.5" y="649.4707">ProducerEssence</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="616" y="795.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="623" y="817.4863">GUIThread</text><rect fill="#FFFFFF" filter="url(#f1g7huewxqxmm2)" height="122.4063" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="910.2656"/><rect fill="#FFFFFF" filter="url(#f1g7huewxqxmm2)" height="135.4063" style="stroke: #000000; stroke-width: 2.0;" width="523.5" x="318" y="1046.6719"/><rect fill="#FFFFFF" filter="url(#f1g7huewxqxmm2)" height="200.4609" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="1301.1328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="39.6094" y2="1640"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="373" x2="373" y1="39.6094" y2="1640"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="536.5" x2="536.5" y1="661.2422" y2="1640"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="659" x2="659" y1="829.2578" y2="1640"/><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="24.5332">Application</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="1639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="1660.5332">Application</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="328" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="335" y="24.5332">St21Library</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="328" y="1639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="335" y="1660.5332">St21Library</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="471.5" y="1639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="478.5" y="1660.5332">ProducerEssence</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="616" y="1639"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="623" y="1660.5332">GUIThread</text><rect fill="#EEEEEE" filter="url(#f1g7huewxqxmm2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="848.5" x="3" y="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="851.5" y1="70.7852" y2="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="851.5" y1="73.7852" y2="73.7852"/><rect fill="#EEEEEE" filter="url(#f1g7huewxqxmm2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="97" x="378.75" y="59.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="384.75" y="77.1045">Initialization</text><polygon fill="#A80036" points="361.5,111.9609,371.5,115.9609,361.5,119.9609,365.5,115.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="115.9609" y2="115.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="73.5" y="111.4561">StCreateDevice() for TX direction</text><polygon fill="#A80036" points="77.5,142.3125,67.5,146.3125,77.5,150.3125,73.5,146.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="146.3125" y2="146.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="141.8076">ST_OK</text><polygon fill="#A80036" points="361.5,172.6641,371.5,176.6641,361.5,180.6641,365.5,176.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="176.6641" y2="176.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="73.5" y="172.1592">StCreateDevice() for RX direction</text><polygon fill="#A80036" points="77.5,203.0156,67.5,207.0156,77.5,211.0156,73.5,207.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="207.0156" y2="207.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="202.5107">ST_OK</text><path d="M13,222.3672 L86,222.3672 L86,230.3672 L76,240.3672 L13,240.3672 L13,222.3672 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="222.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="236.8623">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="101" y="235.7861">[for all chosen essences (Audio, Video and Ancillary)]</text><polygon fill="#A80036" points="361.5,258.7188,371.5,262.7188,361.5,266.7188,365.5,262.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="262.7188" y2="262.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="73.5" y="258.2139">StCreateSession()</text><polygon fill="#A80036" points="77.5,289.0703,67.5,293.0703,77.5,297.0703,73.5,293.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="293.0703" y2="293.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="288.5654">ST_OK</text><polygon fill="#A80036" points="361.5,319.4219,371.5,323.4219,361.5,327.4219,365.5,323.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="323.4219" y2="323.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="73.5" y="318.917">BindIpAddress()</text><polygon fill="#A80036" points="77.5,349.7734,67.5,353.7734,77.5,357.7734,73.5,353.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="353.7734" y2="353.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="349.2686">ST_OK</text><rect fill="#EEEEEE" filter="url(#f1g7huewxqxmm2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="848.5" x="3" y="390.3008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="851.5" y1="390.3008" y2="390.3008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="851.5" y1="393.3008" y2="393.3008"/><rect fill="#EEEEEE" filter="url(#f1g7huewxqxmm2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="304" x="275.25" y="379.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="286" x="281.25" y="396.6201">Application setup as Producer and Consumer</text><path d="M13,420.4766 L86,420.4766 L86,428.4766 L76,438.4766 L13,438.4766 L13,420.4766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="200.4609" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="420.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="434.9717">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="101" y="433.8955">[for all chosen essences (Audio, Video and Ancillary)]</text><polygon fill="#A80036" points="361.5,456.8281,371.5,460.8281,361.5,464.8281,365.5,460.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="460.8281" y2="460.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="73.5" y="456.3232">StAllocFrame() for min 2 frames</text><polygon fill="#A80036" points="77.5,487.1797,67.5,491.1797,77.5,495.1797,73.5,491.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="491.1797" y2="491.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="83.5" y="486.6748">External buffer for essence content</text><polygon fill="#A80036" points="361.5,517.5313,371.5,521.5313,361.5,525.5313,365.5,521.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="521.5313" y2="521.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="73.5" y="517.0264">StRegisterProducer()</text><polygon fill="#A80036" points="77.5,547.8828,67.5,551.8828,77.5,555.8828,73.5,551.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="551.8828" y2="551.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="547.3779">ST_OK</text><polygon fill="#A80036" points="361.5,578.2344,371.5,582.2344,361.5,586.2344,365.5,582.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="582.2344" y2="582.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="73.5" y="577.7295">StRegisterConsumer()</text><polygon fill="#A80036" points="77.5,608.5859,67.5,612.5859,77.5,616.5859,73.5,612.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="612.5859" y2="612.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="608.0811">ST_OK</text><polygon fill="#A80036" points="459.5,645.9375,469.5,649.9375,459.5,653.9375,463.5,649.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="465.5" y1="649.9375" y2="649.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="73.5" y="645.4326">create  (Video, Audio, Ancilary)</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="471.5" y="627.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="478.5" y="649.4707">ProducerEssence</text><polygon fill="#A80036" points="361.5,692.5469,371.5,696.5469,361.5,700.5469,365.5,696.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="696.5469" y2="696.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="73.5" y="692.042">StRegisterProducer()</text><polygon fill="#A80036" points="77.5,722.8984,67.5,726.8984,77.5,730.8984,73.5,726.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="726.8984" y2="726.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="722.3936">ST_OK</text><polygon fill="#A80036" points="361.5,753.25,371.5,757.25,361.5,761.25,365.5,757.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="757.25" y2="757.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="73.5" y="752.7451">St21ProducerStartFrame(frameBuf)</text><polygon fill="#A80036" points="77.5,783.6016,67.5,787.6016,77.5,791.6016,73.5,787.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="787.6016" y2="787.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="783.0967">ST_OK</text><polygon fill="#A80036" points="604,813.9531,614,817.9531,604,821.9531,608,817.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="610" y1="817.9531" y2="817.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="73.5" y="813.4482">create  (Video)</text><rect fill="#FEFECE" filter="url(#f1g7huewxqxmm2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="616" y="795.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="623" y="817.4863">GUIThread</text><polygon fill="#A80036" points="361.5,860.5625,371.5,864.5625,361.5,868.5625,365.5,864.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="864.5625" y2="864.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="73.5" y="860.0576">StStartDevice(dev)</text><polygon fill="#A80036" points="77.5,890.9141,67.5,894.9141,77.5,898.9141,73.5,894.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="894.9141" y2="894.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="890.4092">ST_OK</text><path d="M13,910.2656 L86,910.2656 L86,918.2656 L76,928.2656 L13,928.2656 L13,910.2656 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="122.4063" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="910.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="924.7607">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="101" y="923.6846">[till application exit]</text><polygon fill="#A80036" points="77.5,946.6172,67.5,950.6172,77.5,954.6172,73.5,950.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="372.5" y1="950.6172" y2="950.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="83.5" y="946.1123">St21GetNextFrameBuf()</text><polygon fill="#A80036" points="77.5,976.9688,67.5,980.9688,77.5,984.9688,73.5,980.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="372.5" y1="980.9688" y2="980.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="83.5" y="976.4639">St21NotifyFrameRecv()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="108.5" y1="1011.6719" y2="1011.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108.5" x2="108.5" y1="1011.6719" y2="1024.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67.5" x2="108.5" y1="1024.6719" y2="1024.6719"/><polygon fill="#A80036" points="77.5,1020.6719,67.5,1024.6719,77.5,1028.6719,73.5,1024.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="73.5" y="1006.8154">Copy to frame buffer and update GUI thread pointer</text><path d="M318,1046.6719 L391,1046.6719 L391,1054.6719 L381,1064.6719 L318,1064.6719 L318,1046.6719 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="135.4063" style="stroke: #000000; stroke-width: 2.0;" width="523.5" x="318" y="1046.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="333" y="1061.167">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="406" y="1060.0908">[till application exit]</text><polygon fill="#A80036" points="524.5,1083.0234,534.5,1087.0234,524.5,1091.0234,528.5,1087.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373.5" x2="530.5" y1="1087.0234" y2="1087.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="380.5" y="1082.5186">St21GetNextFrameBuf()</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="536.5" x2="578.5" y1="1117.7266" y2="1117.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="578.5" x2="578.5" y1="1117.7266" y2="1130.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="537.5" x2="578.5" y1="1130.7266" y2="1130.7266"/><polygon fill="#A80036" points="547.5,1126.7266,537.5,1130.7266,547.5,1134.7266,543.5,1130.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="543.5" y="1112.8701">Copy data to buffer</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="659.5" x2="701.5" y1="1161.0781" y2="1161.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="701.5" x2="701.5" y1="1161.0781" y2="1174.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="660.5" x2="701.5" y1="1174.0781" y2="1174.0781"/><polygon fill="#A80036" points="670.5,1170.0781,660.5,1174.0781,670.5,1178.0781,666.5,1174.0781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="666.5" y="1156.2217">Read video buffer and render</text><polygon fill="#A80036" points="77.5,1207.0781,67.5,1211.0781,77.5,1215.0781,73.5,1211.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="535.5" y1="1211.0781" y2="1211.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="83.5" y="1206.5732">: end of data</text><polygon fill="#A80036" points="77.5,1237.4297,67.5,1241.4297,77.5,1245.4297,73.5,1241.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="658.5" y1="1241.4297" y2="1241.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="83.5" y="1236.9248">: end of data</text><rect fill="#EEEEEE" filter="url(#f1g7huewxqxmm2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="848.5" x="3" y="1270.957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="851.5" y1="1270.957" y2="1270.957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="851.5" y1="1273.957" y2="1273.957"/><rect fill="#EEEEEE" filter="url(#f1g7huewxqxmm2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="118" x="368.25" y="1259.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="374.25" y="1277.2764">Library cleanup</text><path d="M13,1301.1328 L86,1301.1328 L86,1309.1328 L76,1319.1328 L13,1319.1328 L13,1301.1328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="200.4609" style="stroke: #000000; stroke-width: 2.0;" width="416" x="13" y="1301.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="1315.6279">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="101" y="1314.5518">[for all chosen essences (Audio, Video and Ancillary)]</text><polygon fill="#A80036" points="361.5,1337.4844,371.5,1341.4844,361.5,1345.4844,365.5,1341.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="1341.4844" y2="1341.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="73.5" y="1336.9795">StProducerStop()</text><polygon fill="#A80036" points="77.5,1367.8359,67.5,1371.8359,77.5,1375.8359,73.5,1371.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="1371.8359" y2="1371.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1367.3311">ST_OK</text><polygon fill="#A80036" points="361.5,1398.1875,371.5,1402.1875,361.5,1406.1875,365.5,1402.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="1402.1875" y2="1402.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="73.5" y="1397.6826">StConsumerStop()</text><polygon fill="#A80036" points="77.5,1428.5391,67.5,1432.5391,77.5,1436.5391,73.5,1432.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="1432.5391" y2="1432.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1428.0342">ST_OK</text><polygon fill="#A80036" points="361.5,1458.8906,371.5,1462.8906,361.5,1466.8906,365.5,1462.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="1462.8906" y2="1462.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="73.5" y="1458.3857">StDestroySession()</text><polygon fill="#A80036" points="77.5,1489.2422,67.5,1493.2422,77.5,1497.2422,73.5,1493.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="1493.2422" y2="1493.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1488.7373">ST_OK</text><polygon fill="#A80036" points="361.5,1526.5938,371.5,1530.5938,361.5,1534.5938,365.5,1530.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="1530.5938" y2="1530.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="73.5" y="1526.0889">StDestroyDevice() for TX direction</text><polygon fill="#A80036" points="77.5,1556.9453,67.5,1560.9453,77.5,1564.9453,73.5,1560.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="1560.9453" y2="1560.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1556.4404">ST_OK</text><polygon fill="#A80036" points="361.5,1587.2969,371.5,1591.2969,361.5,1595.2969,365.5,1591.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="367.5" y1="1591.2969" y2="1591.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="73.5" y="1586.792">StDestroyDevice() for RX direction</text><polygon fill="#A80036" points="77.5,1617.6484,67.5,1621.6484,77.5,1625.6484,73.5,1621.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71.5" x2="372.5" y1="1621.6484" y2="1621.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="83.5" y="1617.1436">ST_OK</text><!--
@startuml
participant Application
participant St21Library

== Initialization ==
Application -> St21Library:StCreateDevice() for TX direction
Application <- - St21Library:ST_OK
Application -> St21Library:StCreateDevice() for RX direction
Application <- - St21Library:ST_OK
loop for all chosen essences (Audio, Video and Ancillary)
Application -> St21Library: StCreateSession()
Application <- - St21Library:ST_OK
Application -> St21Library: BindIpAddress()
Application <- - St21Library:ST_OK
end

== Application setup as Producer and Consumer ==
loop for all chosen essences (Audio, Video and Ancillary)
Application -> St21Library:StAllocFrame() for min 2 frames
Application <- - St21Library:External buffer for essence content
Application -> St21Library: StRegisterProducer()
Application <- - St21Library:ST_OK
Application -> St21Library: StRegisterConsumer()
Application <- - St21Library:ST_OK
end
Application -> ProducerEssence ** : create  (Video, Audio, Ancilary)
Application -> St21Library: StRegisterProducer()
Application <- - St21Library:ST_OK
Application -> St21Library: St21ProducerStartFrame(frameBuf)
Application <- - St21Library:ST_OK

Application -> GUIThread ** : create  (Video)
Application -> St21Library:StStartDevice(dev)
Application <- - St21Library:ST_OK

loop till application exit
    Application <- St21Library: St21GetNextFrameBuf()
Application <- St21Library:St21NotifyFrameRecv()
Application -> Application: Copy to frame buffer and update GUI thread pointer
end
loop till application exit
    ProducerEssence <- St21Library: St21GetNextFrameBuf()
    ProducerEssence - -> ProducerEssence: Copy data to buffer
    GUIThread - -> GUIThread: Read video buffer and render
end
ProducerEssence -> Application:: end of data
GUIThread -> Application:: end of data
== Library cleanup ==
loop for all chosen essences (Audio, Video and Ancillary)
Application -> St21Library: StProducerStop()
Application <- - St21Library:ST_OK
Application -> St21Library: StConsumerStop()
Application <- - St21Library:ST_OK
Application -> St21Library: StDestroySession()
Application <- - St21Library:ST_OK
end
Application -> St21Library:StDestroyDevice() for TX direction
Application <- - St21Library:ST_OK
Application -> St21Library:StDestroyDevice() for RX direction
Application <- - St21Library:ST_OK

@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-release-1483-b39
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>