<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="816px" preserveAspectRatio="none" style="width:726px;height:816px;" version="1.1" viewBox="0 0 726 816" width="726px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vr061tgv0r44" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="801.6016" style="stroke: #A80036; stroke-width: 1.0;" width="236" x="370.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="466" y="17.4951">Library</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="60.9609" y2="765.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="181.5" x2="181.5" y1="60.9609" y2="765.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="336.5" x2="336.5" y1="60.9609" y2="765.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="422.5" x2="422.5" y1="60.9609" y2="765.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="541.5" x2="541.5" y1="60.9609" y2="765.9922"/><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="8" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="15" y="45.8848">Application</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="8" y="764.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="15" y="786.5254">Application</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="144.5" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="151.5" y="45.8848">StDevice</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="144.5" y="764.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="151.5" y="786.5254">StDevice</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="308.5" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="315.5" y="45.8848">DPDK</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="308.5" y="764.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="315.5" y="786.5254">DPDK</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="374.5" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="381.5" y="45.8848">St21Session</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="374.5" y="764.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="381.5" y="786.5254">St21Session</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="481.5" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="488.5" y="45.8848">EnqueueThread</text><rect fill="#FEFECE" filter="url(#f1vr061tgv0r44)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="481.5" y="764.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="488.5" y="786.5254">EnqueueThread</text><polygon fill="#A80036" points="169.5,88.9609,179.5,92.9609,169.5,96.9609,173.5,92.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="175.5" y1="92.9609" y2="92.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="58.5" y="88.4561">StCreateDevice()</text><polygon fill="#A80036" points="411,119.3125,421,123.3125,411,127.3125,415,123.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="417" y1="123.3125" y2="123.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="58.5" y="118.8076">StCreateSession</text><polygon fill="#A80036" points="411,149.6641,421,153.6641,411,157.6641,415,153.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="417" y1="153.6641" y2="153.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="58.5" y="149.1592">BindIpAddress</text><polygon fill="#A80036" points="411,180.0156,421,184.0156,411,188.0156,415,184.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="417" y1="184.0156" y2="184.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="58.5" y="179.5107">StAllocFrame</text><polygon fill="#A80036" points="62.5,210.3672,52.5,214.3672,62.5,218.3672,58.5,214.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="56.5" x2="422" y1="214.3672" y2="214.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="68.5" y="209.8623">External buffer for frames</text><polygon fill="#A80036" points="411,240.7188,421,244.7188,411,248.7188,415,244.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="417" y1="244.7188" y2="244.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="58.5" y="240.2139">StRegisterProducer</text><polygon fill="#A80036" points="411,271.0703,421,275.0703,411,279.0703,415,275.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="417" y1="275.0703" y2="275.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="58.5" y="270.5654">St21ProducerStartFrame(frameBuf)</text><polygon fill="#A80036" points="169.5,301.4219,179.5,305.4219,169.5,309.4219,173.5,305.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="175.5" y1="305.4219" y2="305.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="58.5" y="300.917">StStartDevice(dev)</text><polygon fill="#A80036" points="324.5,331.7734,334.5,335.7734,324.5,339.7734,328.5,335.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="181.5" x2="330.5" y1="335.7734" y2="335.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="188.5" y="331.2686">rte_eal_remote_launch</text><polygon fill="#A80036" points="530,362.125,540,366.125,530,370.125,534,366.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="336.5" x2="536" y1="366.125" y2="366.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="343.5" y="361.6201">Start Thread</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="396.8281" y2="396.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="396.8281" y2="409.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="409.8281" y2="409.8281"/><polygon fill="#A80036" points="553,405.8281,543,409.8281,553,413.8281,549,409.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="549" y="391.9717">UpdateRtpPkt()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="440.1797" y2="440.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="440.1797" y2="453.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="453.1797" y2="453.1797"/><polygon fill="#A80036" points="553,449.1797,543,453.1797,553,457.1797,549,453.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="549" y="435.3232">Create RTP header and fill in</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="483.5313" y2="483.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="483.5313" y2="496.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="496.5313" y2="496.5313"/><polygon fill="#A80036" points="553,492.5313,543,496.5313,553,500.5313,549,496.5313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="549" y="478.6748">Copy payload for DualLine</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="526.8828" y2="526.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="526.8828" y2="539.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="539.8828" y2="539.8828"/><polygon fill="#A80036" points="553,535.8828,543,539.8828,553,543.8828,549,539.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="549" y="522.0264">Copy payload for DualLine</text><polygon fill="#A80036" points="347.5,565.8828,337.5,569.8828,347.5,573.8828,343.5,569.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341.5" x2="541" y1="569.8828" y2="569.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="353.5" y="565.3779">rte_ring_sp_enqueue_bulk</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="51.5" x2="93.5" y1="600.5859" y2="600.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93.5" x2="93.5" y1="600.5859" y2="613.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52.5" x2="93.5" y1="613.5859" y2="613.5859"/><polygon fill="#A80036" points="62.5,609.5859,52.5,613.5859,62.5,617.5859,58.5,613.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="58.5" y="595.7295">CopyNextLines</text><polygon fill="#A80036" points="62.5,639.5859,52.5,643.5859,62.5,647.5859,58.5,643.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="56.5" x2="541" y1="643.5859" y2="643.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="68.5" y="639.0811">St21GetNextFrameBuf</text><polygon fill="#A80036" points="434,669.9375,424,673.9375,434,677.9375,430,673.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="428" x2="541" y1="673.9375" y2="673.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="440" y="669.4326">UpdateRtpPkt()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="704.6406" y2="704.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="704.6406" y2="717.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="717.6406" y2="717.6406"/><polygon fill="#A80036" points="553,713.6406,543,717.6406,553,721.6406,549,717.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="549" y="699.7842">Copy payload</text><polygon fill="#A80036" points="347.5,743.6406,337.5,747.6406,347.5,751.6406,343.5,747.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="341.5" x2="541" y1="747.6406" y2="747.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="353.5" y="743.1357">rte_ring_sp_enqueue_bulk</text><!--
@startuml
participant Application
participant St21Session
participant EnqueueThread
participant StDevice
participant DPDK

box "Library" #LightBlue
participant St21Session
	participant EnqueueThread
end box
Application -> StDevice:StCreateDevice()
Application -> St21Session: StCreateSession
Application -> St21Session: BindIpAddress
Application -> St21Session:StAllocFrame
Application <- - St21Session:External buffer for frames
Application -> St21Session: StRegisterProducer
Application -> St21Session: St21ProducerStartFrame(frameBuf)
Application -> StDevice:StStartDevice(dev)
StDevice ->DPDK: rte_eal_remote_launch
DPDK -> EnqueueThread: Start Thread
EnqueueThread -> EnqueueThread:UpdateRtpPkt()
EnqueueThread -> EnqueueThread:Create RTP header and fill in
EnqueueThread -> EnqueueThread: Copy payload for DualLine
EnqueueThread -> EnqueueThread: Copy payload for DualLine
EnqueueThread -> DPDK:rte_ring_sp_enqueue_bulk
Application -> Application: CopyNextLines
Application <- EnqueueThread: St21GetNextFrameBuf
St21Session <- EnqueueThread:UpdateRtpPkt()
EnqueueThread -> EnqueueThread: Copy payload
EnqueueThread -> DPDK:rte_ring_sp_enqueue_bulk
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-release-1483-b39
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>